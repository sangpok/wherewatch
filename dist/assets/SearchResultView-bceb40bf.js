import{R as O,t as o,z as R,o as a,q as j,w as _,K as M,y as L,B as k,O as C}from"./index-62776af8.js";import{u as T}from"./useIntersectionObserver-b204c29b.js";const $=()=>{const e=o.useMemo(()=>R,[]);return a.jsxs(j.div,{...e,className:"mt-[6.66vw]",children:[a.jsx("div",{className:"h-[4.44vw] w-[50%] animate-pulse rounded-[1.11vw] bg-[#EAEAEA]"}),a.jsxs("div",{className:" mt-[3.33vw] grid grid-cols-2 gap-[4.44vw] ",children:[a.jsx("div",{className:"aspect-[3/4] w-full animate-pulse rounded-[1.11vw] bg-[#EAEAEA]"}),a.jsx("div",{className:"aspect-[3/4] w-full animate-pulse rounded-[1.11vw] bg-[#EAEAEA]"}),a.jsx("div",{className:"aspect-[3/4] w-full animate-pulse rounded-[1.11vw] bg-[#EAEAEA]"}),a.jsx("div",{className:"aspect-[3/4] w-full animate-pulse rounded-[1.11vw] bg-[#EAEAEA]"})]})]})},q=O.memo($);var V={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function U(e){if(typeof e=="number")return{value:e,unit:"px"};var n,r=(e.match(/^[0-9.]*/)||"").toString();r.includes(".")?n=parseFloat(r):n=parseInt(r,10);var t=(e.match(/[^0-9]*$/)||"").toString();return V[t]?{value:n,unit:t}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(n,"px.")),{value:n,unit:"px"})}function E(e){var n=U(e);return"".concat(n.value).concat(n.unit)}var F=function(e,n,r){var t="react-spinners-".concat(e,"-").concat(r);if(typeof window>"u"||!window.document)return t;var s=document.createElement("style");document.head.appendChild(s);var u=s.sheet,m=`
    @keyframes `.concat(t,` {
      `).concat(n,`
    }
  `);return u&&u.insertRule(m,0),t},y=globalThis&&globalThis.__assign||function(){return y=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},y.apply(this,arguments)},I=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)n.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(r[t[s]]=e[t[s]]);return r},Q=F("SyncLoader",`33% {transform: translateY(10px)}
  66% {transform: translateY(-10px)}
  100% {transform: translateY(0)}`,"sync");function Y(e){var n=e.loading,r=n===void 0?!0:n,t=e.color,s=t===void 0?"#000000":t,u=e.speedMultiplier,m=u===void 0?1:u,l=e.cssOverride,w=l===void 0?{}:l,p=e.size,v=p===void 0?15:p,d=e.margin,c=d===void 0?2:d,f=I(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),x=y({display:"inherit"},w),g=function(h){return{backgroundColor:s,width:E(v),height:E(v),margin:E(c),borderRadius:"100%",display:"inline-block",animation:"".concat(Q," ").concat(.6/m,"s ").concat(h*.07,"s infinite ease-in-out"),animationFillMode:"both"}};return r?o.createElement("span",y({style:x},f),o.createElement("span",{style:g(1)}),o.createElement("span",{style:g(2)}),o.createElement("span",{style:g(3)})):null}const D=()=>{const e=_(),n=M(),{search:r}=n,[t,s]=o.useState(new URLSearchParams(r).get("query")),[u,m]=o.useState([]),[l,w]=o.useState(1),p=o.useRef(1),{isSuccess:v,isLoading:d,data:c}=L(["search",{query:t,currentPage:l}],()=>C(t,l)),f=o.useRef(null),[x,g]=T(()=>{l>=p.current||w(i=>i+1)}),h=o.useMemo(()=>new Set,[]),N=o.useCallback(i=>h.has(i)?!1:(h.add(i),!0),[h]);o.useEffect(()=>{if(!(c&&t))return;const i=`${t}-${l}`;N(i)&&(m(b=>[...b,...c.results]),p.current=(c==null?void 0:c.total_pages)||1)},[v]),o.useEffect(()=>{f.current&&(d||l>=p.current?g(f.current):x(f.current))},[d]),o.useEffect(()=>{const i=new URLSearchParams(r).get("query");if(!i||i===""){e("/");return}i!==t&&(m([]),w(1),s(i))},[n]);const P=o.useMemo(()=>R,[]);return d?a.jsx(q,{}):a.jsxs(j.div,{...P,className:"mt-[6.66vw]",children:[v&&a.jsxs("p",{className:" mb-[3.33vw] text-[3.88vw]",children:[a.jsx("strong",{children:t}),"에 대한"," ",a.jsxs("strong",{children:[(c==null?void 0:c.total_results)||"0","건"]}),"의 검색 결과"]}),v&&u.length===0&&a.jsx("p",{children:"검색 결과가 존재하지 않아요😢"}),a.jsx("div",{className:" grid grid-cols-2 gap-[4.44vw]",children:u.map((i,b)=>{const{id:S,media_type:A}=i;return a.jsx(k,{mediaType:A,contentDetail:i,onTap:()=>e(`/${A}/${S}`),cardType:"medium"},`${S}-${b}`)})}),d&&a.jsx(j.div,{className:"absolute bottom-[10vw] flex w-full items-center justify-center",children:a.jsx(Y,{})}),a.jsx("div",{ref:f,className:"list-end pointer-events-none absolute bottom-0 h-[138.88vw] w-full select-none appearance-none bg-transparent outline-none"})]})},W=O.memo(D);export{W as default};
