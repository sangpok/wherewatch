import{R as p,t as l,o as e,q as v,L as S,N as F,A as y,w as I,z as C}from"./index-6a1d5655.js";import{u as $}from"./useIntersectionObserver-5215a69f.js";import{c as j,d as w,e as N,f as b,h as D}from"./tmdb-6129abe1.js";const E={scale:.9},O=({allowsSavingKeyword:t,history:s,recommendItems:n,onSubmit:o,onToggleSaving:a})=>{const i=l.useMemo(()=>t&&s.length!==0,[t,s]),m=l.useMemo(()=>t&&s.length===0,[t,s]),u=l.useCallback(c=>`${(new Date(c).getUTCMonth()+1).toString().padStart(2,"0")}. ${new Date(c).getUTCDate().toString().padStart(2,"0")}.`,[]);return e.jsxs(v.div,{children:[i&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[3.33vw]",children:"최근 검색한 키워드"}),e.jsx("ul",{children:s.map(({keyword:c,date:d},r)=>e.jsxs(v.li,{whileTap:E,className:"flex flex-row place-content-center place-items-center gap-[2.22vw] px-[4.44vw] py-[3.33vw]",onClick:()=>o(c),children:[e.jsx(S,{width:"4.88",height:"4.88"}),e.jsx("p",{className:"flex-1 text-[4.44vw] font-medium",children:c}),e.jsx("p",{className:"text-[3.33vw]",children:u(d)})]},r))})]}),!i&&e.jsxs("div",{className:"flex h-[41.66vw] w-full flex-col place-content-center place-items-center rounded-[1.11vw] border border-[#F5F5F5]",children:[e.jsxs("p",{className:" text-[3.88vw] font-light text-[#999]",children:[m&&"최근 검색한 내역이 없습니다.",!t&&"검색어 저장 기능이 꺼져 있습니다."]}),e.jsxs("div",{className:" text-[3.33vw] font-light text-[#999]",children:[e.jsx("span",{children:"추천 키워드: "}),n.map((c,d)=>e.jsxs(p.Fragment,{children:[!!d&&", ",e.jsx(F,{className:"text-[#51AFE3] underline",to:`/${c.type}/${c.id}`,children:c.name})]},d))]})]}),e.jsx("p",{onClick:()=>a(),children:t?"자동저장 끄기":"자동저장 켜기"})]})},R=p.memo(O),k=({src:t,alt:s})=>{const n=l.useRef(null),[o,a]=$(l.useCallback(()=>{m(!0),a(n.current)},[])),[i,m]=l.useState(!1);return l.useEffect(()=>{o(n.current)},[]),e.jsx("div",{ref:n,children:i&&e.jsx("img",{src:t,loading:"lazy",alt:s})})},A=p.memo(k),H=p.memo(({children:t})=>e.jsx("mark",{className:"bg-transparent text-[#939600]",children:t})),L=({thumbnail:t,title:s,descriptions:n,additionalElement:o=null,highlightKeyword:a=""})=>e.jsxs("div",{className:" flex w-full flex-row items-center space-x-[2.77vw]",children:[e.jsx("div",{className:"aspect-square w-[8.88vw] overflow-hidden rounded-full bg-gray-500 object-cover",children:t&&e.jsx(A,{src:t,alt:s})}),e.jsxs("div",{className:"flex-1 space-y-[1.11vw]",children:[e.jsx("p",{className:"line-clamp-1 text-[4.44vw] font-medium leading-none",children:a?e.jsx(e.Fragment,{children:s.indexOf(a)>=0?e.jsxs(e.Fragment,{children:[s.substring(0,s.indexOf(a)),e.jsx(H,{children:a}),s.substring(s.indexOf(a)+a.length)]}):s}):s}),e.jsx(y,{textList:n})]}),o]}),h=p.memo(L,(t,s)=>t.title===s.title&&t.highlightKeyword===s.highlightKeyword),f={scale:.9},z=p.memo(({type:t="default",contentType:s,id:n,thumbnail:o,title:a,descriptions:i,additionalElement:m,highlightKeyword:u="",groupChildren:c})=>{const d=I(),r=l.useCallback(()=>d(`/${s}/${n}`),[]),g=l.useCallback(()=>d(`/person/${n}`),[]),T=e.jsx(v.div,{"data-item-id":n,whileTap:f,className:"rounded-[1.11vw] border-[0.27vw] border-[#F5F5F5] p-[3.33vw]",onTap:r,children:e.jsx(h,{thumbnail:o,title:a,highlightKeyword:u,descriptions:i,additionalElement:m})}),M=e.jsxs(v.div,{className:" rounded-[1.11vw] border-[0.27vw] border-[#F5F5F5] py-[3.33vw]",children:[e.jsx(v.div,{"data-item-id":n,whileTap:f,className:" mx-[3.33vw] mb-[2.77vw] flex flex-row items-center space-x-[2.77vw]",onTap:g,children:e.jsx(h,{thumbnail:o,title:a,highlightKeyword:u,descriptions:i,additionalElement:m})}),e.jsx("div",{className:" bg-[#f5f5f5] py-[2.22vw]",children:c&&c.map(x=>e.jsx(v.div,{"data-item-id":x.id,whileTap:f,className:" mx-[3.33vw] flex flex-row items-center space-x-[2.77vw] py-[2.22vw]",onTap:()=>d(`/${x.media_type}/${x.id}`),children:e.jsx(h,{thumbnail:j(x),title:w(x),descriptions:N(x),additionalElement:b(x)})},x.id))})]});return t==="default"?T:M}),B=p.memo(z,(t,s)=>t.id===s.id&&t.highlightKeyword===s.highlightKeyword),_=({suggestions:t,keyword:s,allowsSavingKeyword:n,keywordHisory:o,isSuccess:a,onSubmit:i,onToggleSaving:m})=>{const u=l.useMemo(()=>s===""&&t.length===0,[s,t]),c=l.useMemo(()=>a&&s!==""&&t.length===0,[a,s,t]),d=l.useMemo(()=>C,[]);return e.jsxs(v.div,{...d,className:"mt-[3.33vw] select-none space-y-[3.33vw]",children:[u&&e.jsx(R,{allowsSavingKeyword:n,history:o,recommendItems:[{type:"tv",id:123,name:"허허"},{type:"tv",id:123,name:"허허"}],onSubmit:i,onToggleSaving:m},"savedkeywordcard"),c&&e.jsxs("span",{children:[e.jsx("strong",{children:s}),"에 대한 검색결과가 존재하지 않아요😢"]}),t.map(r=>e.jsx(B,{id:r.id,type:D(r),contentType:r.media_type,thumbnail:j(r),title:w(r),highlightKeyword:s,descriptions:N(r),additionalElement:b(r),groupChildren:r.known_for},r.id))]})},G=p.memo(_);export{G as default};
