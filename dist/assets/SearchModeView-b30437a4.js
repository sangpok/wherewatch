import{R as x,t as l,o as e,q as p,L as S,N as F,A as y,w as I,z as C}from"./index-62776af8.js";import{u as $}from"./useIntersectionObserver-b204c29b.js";import{c as j,d as w,e as N,f as b,h as D}from"./tmdb-80915705.js";const E={scale:.9},O=({allowsSavingKeyword:t,history:s,recommendItems:r,onSubmit:o,onToggleSaving:a})=>{const i=l.useMemo(()=>t&&s.length!==0,[t,s]),v=l.useMemo(()=>t&&s.length===0,[t,s]),u=l.useCallback(n=>`${(new Date(n).getUTCMonth()+1).toString().padStart(2,"0")}. ${new Date(n).getUTCDate().toString().padStart(2,"0")}.`,[]);return e.jsxs(p.div,{children:[i&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[3.33vw]",children:"최근 검색한 키워드"}),e.jsx("ul",{children:s.map(({keyword:n,date:d},c)=>e.jsxs(p.li,{whileTap:E,className:"flex flex-row place-content-center place-items-center gap-[2.22vw] px-[4.44vw] py-[3.33vw]",onClick:()=>o(n),children:[e.jsx(S,{width:"4.88",height:"4.88"}),e.jsx("p",{className:"flex-1 text-[4.44vw] font-medium",children:n}),e.jsx("p",{className:"text-[3.33vw]",children:u(d)})]},c))})]}),!i&&e.jsxs("div",{className:"flex h-[41.66vw] w-full flex-col place-content-center place-items-center rounded-[1.11vw] border border-[#F5F5F5]",children:[e.jsxs("p",{className:" text-[3.88vw] font-light text-[#999]",children:[v&&"최근 검색한 내역이 없습니다.",!t&&"검색어 저장 기능이 꺼져 있습니다."]}),e.jsxs("div",{className:" text-[3.33vw] font-light text-[#999]",children:[e.jsx("span",{children:"추천 키워드: "}),r.map((n,d)=>e.jsxs(x.Fragment,{children:[!!d&&", ",e.jsx(F,{className:"text-[#51AFE3] underline",to:`/${n.type}/${n.id}`,children:n.name})]},d))]})]}),e.jsx("p",{onClick:()=>a(),children:t?"자동저장 끄기":"자동저장 켜기"})]})},R=x.memo(O),k=({src:t})=>{const s=l.useRef(null),[r,o]=$(l.useCallback(()=>{i(!0),o(s.current)},[])),[a,i]=l.useState(!1);return l.useEffect(()=>{r(s.current)},[]),e.jsx("div",{ref:s,children:a&&e.jsx("img",{src:t,loading:"lazy"})})},A=x.memo(k),H=x.memo(({children:t})=>e.jsx("mark",{className:"bg-transparent text-[#939600]",children:t})),L=({thumbnail:t,title:s,descriptions:r,additionalElement:o=null,highlightKeyword:a=""})=>e.jsxs("div",{className:" flex w-full flex-row items-center space-x-[2.77vw]",children:[e.jsx("div",{className:"aspect-square w-[8.88vw] overflow-hidden rounded-full bg-gray-500 object-cover",children:t&&e.jsx(A,{src:t})}),e.jsxs("div",{className:"flex-1 space-y-[1.11vw]",children:[e.jsx("p",{className:"line-clamp-1 text-[4.44vw] font-medium leading-none",children:a?e.jsx(e.Fragment,{children:s.indexOf(a)>=0?e.jsxs(e.Fragment,{children:[s.substring(0,s.indexOf(a)),e.jsx(H,{children:a}),s.substring(s.indexOf(a)+a.length)]}):s}):s}),e.jsx(y,{textList:r})]}),o]}),h=x.memo(L,(t,s)=>t.title===s.title&&t.highlightKeyword===s.highlightKeyword),f={scale:.9},z=x.memo(({type:t="default",contentType:s,id:r,thumbnail:o,title:a,descriptions:i,additionalElement:v,highlightKeyword:u="",groupChildren:n})=>{const d=I(),c=l.useCallback(()=>d(`/${s}/${r}`),[]),g=l.useCallback(()=>d(`/person/${r}`),[]),T=e.jsx(p.div,{"data-item-id":r,whileTap:f,className:"rounded-[1.11vw] border-[0.27vw] border-[#F5F5F5] p-[3.33vw]",onTap:c,children:e.jsx(h,{thumbnail:o,title:a,highlightKeyword:u,descriptions:i,additionalElement:v})}),M=e.jsxs(p.div,{className:" rounded-[1.11vw] border-[0.27vw] border-[#F5F5F5] py-[3.33vw]",children:[e.jsx(p.div,{"data-item-id":r,whileTap:f,className:" mx-[3.33vw] mb-[2.77vw] flex flex-row items-center space-x-[2.77vw]",onTap:g,children:e.jsx(h,{thumbnail:o,title:a,highlightKeyword:u,descriptions:i,additionalElement:v})}),e.jsx("div",{className:" bg-[#f5f5f5] py-[2.22vw]",children:n&&n.map(m=>e.jsx(p.div,{"data-item-id":m.id,whileTap:f,className:" mx-[3.33vw] flex flex-row items-center space-x-[2.77vw] py-[2.22vw]",onTap:()=>d(`/${m.media_type}/${m.id}`),children:e.jsx(h,{thumbnail:j(m),title:w(m),descriptions:N(m),additionalElement:b(m)})},m.id))})]});return t==="default"?T:M}),B=x.memo(z,(t,s)=>t.id===s.id&&t.highlightKeyword===s.highlightKeyword),_=({suggestions:t,keyword:s,allowsSavingKeyword:r,keywordHisory:o,isSuccess:a,onSubmit:i,onToggleSaving:v})=>{const u=l.useMemo(()=>s===""&&t.length===0,[s,t]),n=l.useMemo(()=>a&&s!==""&&t.length===0,[a,s,t]),d=l.useMemo(()=>C,[]);return e.jsxs(p.div,{...d,className:"mt-[3.33vw] select-none space-y-[3.33vw]",children:[u&&e.jsx(R,{allowsSavingKeyword:r,history:o,recommendItems:[{type:"tv",id:123,name:"허허"},{type:"tv",id:123,name:"허허"}],onSubmit:i,onToggleSaving:v},"savedkeywordcard"),n&&e.jsxs("span",{children:[e.jsx("strong",{children:s}),"에 대한 검색결과가 존재하지 않아요😢"]}),t.map(c=>e.jsx(B,{id:c.id,type:D(c),contentType:c.media_type,thumbnail:j(c),title:w(c),highlightKeyword:s,descriptions:N(c),additionalElement:b(c),groupChildren:c.known_for},c.id))]})},G=x.memo(_);export{G as default};
