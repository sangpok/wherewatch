import{t as o,R as _,w as P,G as L,y as C,o as c,q as R,z as M,B as N,O as T}from"./index-92835960.js";import{u as $}from"./useIntersectionObserver-cb1ae34f.js";var k={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function q(e){if(typeof e=="number")return{value:e,unit:"px"};var n,r=(e.match(/^[0-9.]*/)||"").toString();r.includes(".")?n=parseFloat(r):n=parseInt(r,10);var t=(e.match(/[^0-9]*$/)||"").toString();return k[t]?{value:n,unit:t}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(n,"px.")),{value:n,unit:"px"})}function S(e){var n=q(e);return"".concat(n.value).concat(n.unit)}var U=function(e,n,r){var t="react-spinners-".concat(e,"-").concat(r);if(typeof window>"u"||!window.document)return t;var a=document.createElement("style");document.head.appendChild(a);var u=a.sheet,d=`
    @keyframes `.concat(t,` {
      `).concat(n,`
    }
  `);return u&&u.insertRule(d,0),t},b=globalThis&&globalThis.__assign||function(){return b=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(this,arguments)},A=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]]);return r},F=U("SyncLoader",`33% {transform: translateY(10px)}
  66% {transform: translateY(-10px)}
  100% {transform: translateY(0)}`,"sync");function I(e){var n=e.loading,r=n===void 0?!0:n,t=e.color,a=t===void 0?"#000000":t,u=e.speedMultiplier,d=u===void 0?1:u,l=e.cssOverride,h=l===void 0?{}:l,m=e.size,p=m===void 0?15:m,f=e.margin,i=f===void 0?2:f,v=A(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),w=b({display:"inherit"},h),g=function(y){return{backgroundColor:a,width:S(p),height:S(p),margin:S(i),borderRadius:"100%",display:"inline-block",animation:"".concat(F," ").concat(.6/d,"s ").concat(y*.07,"s infinite ease-in-out"),animationFillMode:"both"}};return r?o.createElement("span",b({style:w},v),o.createElement("span",{style:g(1)}),o.createElement("span",{style:g(2)}),o.createElement("span",{style:g(3)})):null}const Q=()=>{const e=P(),n=L(),{search:r}=n,[t,a]=o.useState(new URLSearchParams(r).get("query")),[u,d]=o.useState([]),[l,h]=o.useState(1),m=o.useRef(1),{isSuccess:p,isLoading:f,data:i}=C(["search",{query:t,currentPage:l}],()=>T(t,l)),v=o.useRef(null),[w,g]=$(()=>{l>=m.current||h(s=>s+1)}),y=o.useMemo(()=>new Set,[]),E=o.useCallback(s=>y.has(s)?!1:(y.add(s),!0),[y]);return o.useEffect(()=>{if(!(i&&t))return;const s=`${t}-${l}`;E(s)&&(d(x=>[...x,...i.results]),m.current=(i==null?void 0:i.total_pages)||1)},[p]),o.useEffect(()=>{v.current&&(f||l>=m.current?g(v.current):w(v.current))},[f]),o.useEffect(()=>{const s=new URLSearchParams(r).get("query");if(!s||s===""){e("/");return}s!==t&&(d([]),h(1),a(s))},[n]),c.jsxs(R.div,{...M,className:"mt-[6.66vw]",children:[p&&c.jsxs("p",{className:" mb-[3.33vw] text-[3.88vw]",children:[c.jsx("strong",{children:t}),"에 대한"," ",c.jsxs("strong",{children:[(i==null?void 0:i.total_results)||"0","건"]}),"의 검색 결과"]}),p&&u.length===0&&c.jsx("p",{children:"검색 결과가 존재하지 않아요😢"}),c.jsx("div",{className:" grid grid-cols-2 gap-[4.44vw]",children:u.map((s,x)=>{const{id:j,media_type:O}=s;return c.jsx(N,{mediaType:O,contentDetail:s,onTap:()=>e(`/${O}/${j}`),cardType:"medium"},`${j}-${x}`)})}),f&&c.jsx(R.div,{className:"absolute bottom-[10vw] flex w-full items-center justify-center",children:c.jsx(I,{})}),c.jsx("div",{ref:v,className:"list-end pointer-events-none absolute bottom-0 h-[138.88vw] w-full select-none appearance-none bg-transparent outline-none"})]})},D=_.memo(Q);export{D as default};
