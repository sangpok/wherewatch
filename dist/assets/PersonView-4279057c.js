import{i as et,a as nt,S as st,H as at,v as _,s as it,c as ot,m as rt,b as lt,d as ct,e as ut,r as mt,f as q,g as ft,h as dt,p as gt,j as ht,k as O,l as pt,u as R,n as vt,R as D,o as i,q as C,t as E,w as yt,x as xt,y as wt,z as At,N as jt,M as bt,A as Et,B as Nt,C as St,D as Dt}from"./index-6a1d5655.js";import{u as Mt,_ as kt,B as Ct}from"./useNavigateBack-9017086c.js";function U(t,e,n){var a;if(typeof t=="string"){let s=document;e&&(et(!!e.current),s=e.current),n?((a=n[t])!==null&&a!==void 0||(n[t]=s.querySelectorAll(t)),t=n[t]):t=s.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}class J{constructor(e){this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let a=0;a<this.animations.length;a++)this.animations[a][e]=n}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Tt(t){return typeof t=="object"&&!Array.isArray(t)}function _t(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=nt(t)?new st(e,{enableHardwareAcceleration:!1}):new at(e,{enableHardwareAcceleration:!0});n.mount(t),_.set(t,n)}function Pt(t,e=100){const n=it({keyframes:[0,e],...t}),a=Math.min(ot(n),rt);return{type:"keyframes",ease:s=>n.next(a*s).value/e,duration:lt(a)}}function H(t,e,n,a){var s;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(s=a.get(e))!==null&&s!==void 0?s:t}const Vt=(t,e,n)=>{const a=e-t;return((n-t)%a+a)%a+t};function It(t,e){return ct(t)?t[Vt(0,t.length,e)]:t}function Bt(t,e,n){for(let a=0;a<t.length;a++){const s=t[a];s.at>e&&s.at<n&&(mt(t,s),a--)}}function Lt(t,e,n,a,s,o){Bt(t,s,o);for(let r=0;r<e.length;r++)t.push({value:e[r],at:ut(s,o,a[r]),easing:It(n,r)})}function Wt(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const Gt="easeInOut";function Kt(t,{defaultTransition:e={},...n}={},a){const s=e.duration||.3,o=new Map,r=new Map,g={},m=new Map;let p=0,l=0,x=0;for(let v=0;v<t.length;v++){const d=t[v];if(typeof d=="string"){m.set(d,l);continue}else if(!Array.isArray(d)){m.set(d.name,H(l,d.at,p,m));continue}let[y,c,u={}]=d;u.at!==void 0&&(l=H(l,u.at,p,m));let f=0;const N=(w,A,b,M=0,k=0)=>{const h=Ft(w),{delay:T=0,times:S=ft(h),type:X="keyframes",...Z}=A;let{ease:P=e.ease||"easeOut",duration:j}=A;const V=typeof T=="function"?T(M,k):T,I=h.length;if(I<=2&&X==="spring"){let G=100;if(I===2&&$t(h)){const tt=h[1]-h[0];G=Math.abs(tt)}const K={...Z};j!==void 0&&(K.duration=ht(j));const F=Pt(K,G);P=F.ease,j=F.duration}j??(j=s);const B=l+V,L=B+j;S.length===1&&S[0]===0&&(S[1]=1);const W=S.length-h.length;W>0&&dt(S,W),h.length===1&&h.unshift(null),Lt(b,h,P,S,B,L),f=Math.max(V+j,f),x=Math.max(L,x)};if(q(y)){const w=$(y,r);N(c,u,z("default",w))}else{const w=U(y,a,g),A=w.length;for(let b=0;b<A;b++){c=c,u=u;const M=w[b],k=$(M,r);for(const h in c)N(c[h],Rt(u,h),z(h,k),b,A)}p=l,l+=f}}return r.forEach((v,d)=>{for(const y in v){const c=v[y];c.sort(Wt);const u=[],f=[],N=[];for(let A=0;A<c.length;A++){const{at:b,value:M,easing:k}=c[A];u.push(M),f.push(gt(0,x,b)),N.push(k||"easeOut")}f[0]!==0&&(f.unshift(0),u.unshift(u[0]),N.unshift(Gt)),f[f.length-1]!==1&&(f.push(1),u.push(null)),o.has(d)||o.set(d,{keyframes:{},transition:{}});const w=o.get(d);w.keyframes[y]=u,w.transition[y]={...e,duration:x,ease:N,times:f,...n}}}),o}function $(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function z(t,e){return e[t]||(e[t]=[]),e[t]}function Ft(t){return Array.isArray(t)?t:[t]}function Rt(t,e){return t[e]?{...t,...t[e]}:{...t}}const Ht=t=>typeof t=="number",$t=t=>t.every(Ht);function Q(t,e,n,a){const s=U(t,a),o=s.length,r=[];for(let g=0;g<o;g++){const m=s[g];_.has(m)||_t(m);const p=_.get(m),l={...n};typeof l.delay=="function"&&(l.delay=l.delay(g,o)),r.push(...pt(p,{...e,transition:l},{}))}return new J(r)}const zt=t=>Array.isArray(t)&&Array.isArray(t[0]);function qt(t,e,n){const a=[];return Kt(t,e,n).forEach(({keyframes:o,transition:r},g)=>{let m;q(g)?m=O(g,o.default,r.default):m=Q(g,o,r),a.push(m)}),new J(a)}const Ot=t=>{function e(n,a,s){let o;return zt(n)?o=qt(n,a,t):Tt(a)?o=Q(n,a,s,t):o=O(n,a,s),t&&t.animations.push(o),o}return e};function Ut(){const t=R(()=>({current:null,animations:[]})),e=R(()=>Ot(t));return vt(()=>{t.animations.forEach(n=>n.stop())}),[t,e]}const Jt={scale:.7,opacity:0},Qt={type:"spring",damping:100,stiffness:500},Yt={left:0,right:0},Xt={scale:1,opacity:1},Zt=D.memo(({backgroundColor:t,index:e,onClick:n})=>i.jsx(C.div,{animate:{backgroundColor:t},className:"block aspect-square w-[3.33vw]  rounded-full ",onClick:E.useCallback(()=>n(e),[])})),te=D.memo(({current:t,max:e,onClick:n})=>i.jsx("div",{className:"mx-auto mt-[4.44vw] flex w-fit space-x-[1.11vw] rounded-[4.44vw] bg-white p-[1.11vw]",children:Array(e).fill(null).map((a,s)=>i.jsx(Zt,{index:s,backgroundColor:s===t?"#add8e6":"#d3d3d3",onClick:n},s))}),(t,e)=>t.current===e.current),Y=D.memo(({src:t,animate:e})=>i.jsx(C.div,{initial:Jt,animate:e,transition:Qt,className:` relative aspect-[3/4] min-w-[60.55vw] max-w-[60.55vw] select-none overflow-hidden rounded-[3.33vw] ${t?"":"bg-gray-500"} shadow-[0_0_50px_-12px_rgb(0,0,0,0.25)]`,children:t&&i.jsx("div",{className:"h-full w-full",style:{backgroundImage:`url('http://image.tmdb.org/t/p/original${t}')`,backgroundSize:"cover"}})}),(t,e)=>t.animate.scale===e.animate.scale&&t.src===e.src),ee=D.memo(()=>i.jsx(Y,{src:null,animate:Xt})),ne=({viewport:t,profiles:e})=>{const[n,a]=Ut(),[s,o]=E.useState(0),r=E.useMemo(()=>t.clientWidth,[t.clientWidth]),g=E.useMemo(()=>60.55*r/100,[r]);E.useEffect(()=>{n.current&&a(n.current,{x:s*-g},{type:"spring",damping:100,stiffness:500}).then(()=>{}).catch(()=>{})},[s]);const m=E.useCallback((p,l)=>{const x=l.offset.x,v=l.velocity.x,d=x>=r/3||v>=500,y=s-1<0;d&&!y&&o(s-1);const c=x<=-(r/3)||v<=-500,u=s+1>=e.length;c&&!u&&o(s+1)},[s]);return i.jsxs(i.Fragment,{children:[i.jsx(C.div,{drag:"x",dragConstraints:Yt,dragElastic:.1,onDragEnd:m,className:"relative w-fit",children:i.jsxs("div",{ref:n,className:"ml-[19.72vw] mt-[28.05vw] flex w-fit whitespace-nowrap ",children:[e.length===0&&i.jsx(ee,{}),e.map((p,l)=>i.jsx(Y,{src:p,animate:{scale:l===s?1:.9,opacity:l===s?1:.5}},l))]})}),i.jsx(te,{max:e.length||1,current:s,onClick:E.useCallback(p=>o(p),[])})]})},se=D.memo(ne),ae=()=>{const t=yt(),e=Mt(),{id:n}=xt(),{isSuccess:a,isLoading:s,data:o}=wt(["detail",n],()=>Dt(n)),r=E.useMemo(()=>At,[]);if(s)return i.jsx(C.div,{...r,className:"mt-[10vw] flex w-full items-center justify-center",children:i.jsx(kt,{})});if(!o||!a)return;const{images:g,name:m,known_for_department:p,birthday:l,combined_credits:x}=o,{profiles:v}=g,{cast:d}=x,y=(()=>{const c=[];if(c.push(St(p)),!l)c.push("-ë…„","-ì„¸");else{const u=l.substring(0,4),f=(new Date().getUTCFullYear()-parseInt(l.substring(0,4))).toString();c.push(u+"ë…„",f+"ì„¸")}return c})();return i.jsxs(C.div,{...r,className:"overflow-hidden",children:[i.jsxs("div",{className:" absolute left-[3.33vw] top-[6.66vw] flex flex-row gap-[1.11vw]",children:[i.jsx(Ct,{onClick:()=>e(),fill:"black"}),i.jsx(jt,{to:"/",children:i.jsx(bt,{})})]}),i.jsx(se,{viewport:document.documentElement,profiles:v.map(({file_path:c})=>c)}),i.jsxs("div",{className:"mx-auto mt-[4.44vw] flex w-fit flex-col place-content-center place-items-center",children:[i.jsx("p",{className:" text-center text-[7.77vw] font-bold",children:m}),i.jsx(Et,{textList:y})]}),i.jsxs("div",{className:" mx-[3.33vw] my-[13.33vw]",children:[d.length===0&&i.jsx("p",{className:"text-center text-[3.33vw]",children:"ìž‘í’ˆ ì •ë³´ê°€ ì¡´ìž¬í•˜ì§€ ì•Šì•„ìš”ðŸ˜¢"}),i.jsx("div",{className:"grid grid-cols-2 gap-[4.44vw]",children:d.map(c=>{const{id:u,media_type:f}=c;return i.jsx(Nt,{mediaType:f,contentDetail:c,onTap:()=>t(`/${f}/${u}`),cardType:"medium"},u)})})]})]})},re=D.memo(ae);export{re as default};
